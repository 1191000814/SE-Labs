(function(e){function t(t){for(var a,l,i=t[0],n=t[1],d=t[2],u=0,b=[];u<i.length;u++)l=i[u],Object.prototype.hasOwnProperty.call(r,l)&&r[l]&&b.push(r[l][0]),r[l]=0;for(a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);s&&s(t);while(b.length)b.shift()();return c.push.apply(c,d||[]),o()}function o(){for(var e,t=0;t<c.length;t++){for(var o=c[t],a=!0,i=1;i<o.length;i++){var n=o[i];0!==r[n]&&(a=!1)}a&&(c.splice(t--,1),e=l(l.s=o[0]))}return e}var a={},r={app:0},c=[];function l(t){if(a[t])return a[t].exports;var o=a[t]={i:t,l:!1,exports:{}};return e[t].call(o.exports,o,o.exports,l),o.l=!0,o.exports}l.m=e,l.c=a,l.d=function(e,t,o){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},l.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(l.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)l.d(o,a,function(t){return e[t]}.bind(null,a));return o},l.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="./";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],n=i.push.bind(i);i.push=t,i=i.slice();for(var d=0;d<i.length;d++)t(i[d]);var s=n;c.push([0,"chunk-vendors"]),o()})({0:function(e,t,o){e.exports=o("56d7")},"1ca0":function(e,t,o){"use strict";o("cd16")},"1d52":function(e,t,o){},"26cc":function(e,t,o){"use strict";o("6dc9")},"2aba":function(e,t,o){},"56d7":function(e,t,o){"use strict";o.r(t);var a=o("7a23");function r(e,t){const o=Object(a["M"])("router-view");return Object(a["C"])(),Object(a["f"])(o)}o("cf2a");var c=o("6b0d"),l=o.n(c);const i={},n=l()(i,[["render",r]]);var d=n,s=o("6c02");const u=e=>(Object(a["F"])("data-v-da717f6a"),e=e(),Object(a["D"])(),e),b={id:"body"},m=u(()=>Object(a["i"])("h1",{id:"head"},"登录体验完整功能",-1)),p=u(()=>Object(a["i"])("p",{id:"subtitle"},"软件过程与工具大作业项目",-1)),O=u(()=>Object(a["i"])("div",{id:"space1"},null,-1)),j={id:"to_register"},h=Object(a["k"])(" 没有账号？点击"),g=Object(a["k"])("注册"),f={id:"login"},y=Object(a["k"])("登录");function v(e,t,o,r,c,l){const i=Object(a["M"])("nut-input"),n=Object(a["M"])("router-link"),d=Object(a["M"])("nut-button");return Object(a["C"])(),Object(a["h"])("div",b,[m,p,Object(a["l"])(i,{placeholder:"请输入用户名",modelValue:c.form.username,"onUpdate:modelValue":t[0]||(t[0]=e=>c.form.username=e),label:"用户名"},null,8,["modelValue"]),O,Object(a["l"])(i,{placeholder:"请输入密码",modelValue:c.form.password,"onUpdate:modelValue":t[1]||(t[1]=e=>c.form.password=e),type:"password",label:"密码"},null,8,["modelValue"]),Object(a["i"])("div",j,[h,Object(a["l"])(n,{to:"/register"},{default:Object(a["X"])(()=>[g]),_:1})]),Object(a["i"])("div",f,[Object(a["l"])(d,{size:"large",type:"primary",onClick:l.submit},{default:Object(a["X"])(()=>[y]),_:1},8,["onClick"])])])}var w=o("42b7"),_=o("9035"),I=o.n(_);const C=!1,k="3312a246.cpolar.io",V=async function(e,t,o){let a;return await I()({method:"post",url:e,headers:{"Content-Type":"application/x-www-form-urlencoded"},data:"action="+t+"&data="+JSON.stringify(o)}).then((function(e){a=e["data"]})),a};let P="";const N=async function(e,t){if(C)return{flag:!0,data:{user_id:123456}};let o="https://"+k+P+"/retail/customer";return await V(o,"login",{name:e,password:t})};var S={name:"Login",data(){return{form:{username:"",password:""}}},methods:{async submit(){if(""===this.form.username.trim())return void w["b"].danger("请输入用户名",{duration:1e3});if(""===this.form.password.trim())return void w["b"].danger("请输入密码",{duration:1e3});let e=await N(this.form.username,this.form.password);!0===e["flag"]?(w["b"].success("登录成功"),localStorage.setItem("id",e["data"]["id"]),localStorage.setItem("name",e["data"]["name"]),localStorage.setItem("method",e["data"]["method"]),this.$router.push("/market")):w["b"].danger(e.data)}},async mounted(){null!==localStorage.getItem("id")&&this.$router.push("/market")}};o("a4af");const M=l()(S,[["render",v],["__scopeId","data-v-da717f6a"]]);var L=M;const U=e=>(Object(a["F"])("data-v-3e2b1c8e"),e=e(),Object(a["D"])(),e),X={id:"body"},x=U(()=>Object(a["i"])("h1",{id:"head"},"用户注册",-1)),D=U(()=>Object(a["i"])("p",{id:"subtitle"},"软件过程与工具大作业项目",-1)),R={id:"to_login"},A=Object(a["k"])(" 已有账号？点击"),B=Object(a["k"])("登录"),T={id:"register"},z=Object(a["k"])("注册");function F(e,t,o,r,c,l){const i=Object(a["M"])("nut-input"),n=Object(a["M"])("nut-picker"),d=Object(a["M"])("router-link"),s=Object(a["M"])("nut-button");return Object(a["C"])(),Object(a["h"])("div",X,[x,D,Object(a["l"])(i,{class:"input_row",placeholder:"请输入用户名",modelValue:c.form.username,"onUpdate:modelValue":t[0]||(t[0]=e=>c.form.username=e),label:"用户名"},null,8,["modelValue"]),Object(a["l"])(i,{class:"input_row",placeholder:"请输入密码",modelValue:c.form.password,"onUpdate:modelValue":t[1]||(t[1]=e=>c.form.password=e),type:"password",label:"密码"},null,8,["modelValue"]),Object(a["l"])(i,{class:"input_row",placeholder:"请再次输入密码",modelValue:c.form.password2,"onUpdate:modelValue":t[2]||(t[2]=e=>c.form.password2=e),type:"password",label:"确认密码"},null,8,["modelValue"]),Object(a["l"])(i,{class:"input_row",placeholder:"请输入电话号码",modelValue:c.form.phone,"onUpdate:modelValue":t[3]||(t[3]=e=>c.form.phone=e),label:"电话号码"},null,8,["modelValue"]),Object(a["l"])(i,{class:"input_row",placeholder:"请输入所在单位",modelValue:c.form.company,"onUpdate:modelValue":t[4]||(t[4]=e=>c.form.company=e),label:"所在单位"},null,8,["modelValue"]),Object(a["l"])(i,{class:"input_row",placeholder:"选择客户类型",modelValue:c.form.method,"onUpdate:modelValue":t[5]||(t[5]=e=>c.form.method=e),onFocus:l.onChooseType,label:"客户类型"},null,8,["modelValue","onFocus"]),Object(a["l"])(n,{visible:c.showChoices,"onUpdate:visible":t[6]||(t[6]=e=>c.showChoices=e),"list-data":c.types,title:"客户类型选择",onConfirm:l.confirm,"default-value-index":1},null,8,["visible","list-data","onConfirm"]),Object(a["i"])("div",R,[A,Object(a["l"])(d,{to:"/login"},{default:Object(a["X"])(()=>[B]),_:1})]),Object(a["i"])("div",T,[Object(a["l"])(s,{size:"large",type:"primary",onClick:l.submit},{default:Object(a["X"])(()=>[z]),_:1},8,["onClick"])])])}let K="";const J=async function(e,t,o,a,r){if(C)return{flag:!0,data:{}};let c="https://"+k+K+"/retail/customer";return await V(c,"register",{name:e,password:t,phone:o,company:a,method:r})};var $={name:"Register",data(){return{form:{username:"",password:"",password2:"",phone:"",company:"",method:""},showChoices:!1,types:["零售","批发"]}},methods:{async submit(){if(""===this.form.username.trim())return void w["b"].danger("请输入用户名",{duration:1e3});if(""===this.form.password.trim())return void w["b"].danger("请输入密码",{duration:1e3});if(""===this.form.password.trim()||this.form.password.trim()!==this.form.password2.trim())return void w["b"].danger("两次密码输入不一致",{duration:1e3});let e="零售"!==this.form.method,t=await J(this.form.username,this.form.password,this.form.phone,this.form.company,e);!0===t["flag"]?(w["b"].success("注册成功"),this.$router.push("/login")):w["b"].danger(t["data"])},onChooseType(){this.showChoices=!0},confirm(e){this.form.method=e}},mounted(){}};o("af49");const E=l()($,[["render",F],["__scopeId","data-v-3e2b1c8e"]]);var G=E;const H=e=>(Object(a["F"])("data-v-415d2f7c"),e=e(),Object(a["D"])(),e),q=H(()=>Object(a["i"])("div",{id:"header_div"},null,-1)),Q=H(()=>Object(a["i"])("div",{id:"footer_div"},null,-1));function W(e,t,o,r,c,l){const i=Object(a["M"])("Header"),n=Object(a["M"])("Body"),d=Object(a["M"])("Footer");return Object(a["C"])(),Object(a["h"])(a["a"],null,[Object(a["l"])(i,{id:"header"}),q,Object(a["l"])(n,{id:"body"}),Object(a["l"])(d,{id:"footer"}),Q],64)}function Y(e,t,o,r,c,l){return Object(a["C"])(),Object(a["h"])("div",null,[Object(a["i"])("h2",null,Object(a["P"])(c.NavName),1)])}var Z={data(){return{NavNameList:{"/market":"商城","/cart":"购物车","/order":"订单","/info":"我的"},NavName:"商城"}},watch:{$route(e,t){this.NavName=this.NavNameList[e.path]}}};o("ae7e");const ee=l()(Z,[["render",Y],["__scopeId","data-v-29805cd4"]]);var te=ee;function oe(e,t,o,r,c,l){const i=Object(a["M"])("router-view");return Object(a["C"])(),Object(a["f"])(i)}var ae={};const re=l()(ae,[["render",oe]]);var ce=re;function le(e,t,o,r,c,l){const i=Object(a["M"])("nut-tabbar-item"),n=Object(a["M"])("nut-tabbar");return Object(a["C"])(),Object(a["f"])(n,{buttom:!0,onTabSwitch:l.tabSwitch},{default:Object(a["X"])(()=>[Object(a["l"])(i,{"tab-title":"商城",icon:"home"}),Object(a["l"])(i,{"tab-title":"购物车",icon:"cart"}),Object(a["l"])(i,{"tab-title":"订单",icon:"category"}),Object(a["l"])(i,{"tab-title":"我的",icon:"my"})]),_:1},8,["onTabSwitch"])}var ie={data(){return{navRoutes:{0:"/market",1:"/cart",2:"/order",3:"/info"}}},methods:{tabSwitch(e,t){this.$router.push(this.navRoutes[t])}}};const ne=l()(ie,[["render",le]]);var de=ne,se={components:{Header:te,Body:ce,Footer:de}};o("e9cf");const ue=l()(se,[["render",W],["__scopeId","data-v-415d2f7c"]]);var be=ue;const me=Object(a["i"])("img",{src:"https://img2.baidu.com/it/u=1189085500,4133594552&fm=253&fmt=auto&app=120&f=JPEG?w=200&h=200",alt:""},null,-1),pe=Object(a["i"])("img",{src:"https://img1.baidu.com/it/u=961597277,2375562680&fm=253&fmt=auto&app=120&f=JPEG?w=200&h=200",alt:""},null,-1),Oe=Object(a["i"])("img",{src:"https://img1.baidu.com/it/u=2779013017,1184228350&fm=26&fmt=auto",alt:""},null,-1),je={class:"search_prolist_attr"},he={class:"word"},ge=Object(a["k"])("加入购物车");function fe(e,t,o,r,c,l){const i=Object(a["M"])("nut-icon"),n=Object(a["M"])("nut-searchbar"),d=Object(a["M"])("nut-swiper-item"),s=Object(a["M"])("nut-swiper"),u=Object(a["M"])("nut-button"),b=Object(a["M"])("nut-card"),m=Object(a["M"])("nut-backtop");return Object(a["C"])(),Object(a["h"])("div",null,[Object(a["l"])(n,{modelValue:c.searchValue,"onUpdate:modelValue":t[0]||(t[0]=e=>c.searchValue=e),placeholder:"搜索商品",onSearch:l.onSearch},{leftin:Object(a["X"])(()=>[Object(a["l"])(i,{size:"14",name:"search2"})]),_:1},8,["modelValue","onSearch"]),Object(a["i"])("div",null,[Object(a["l"])(s,{"init-page":0,"pagination-visible":!0,"pagination-color":"#426543","auto-play":"3000",height:"200"},{default:Object(a["X"])(()=>[Object(a["l"])(d,null,{default:Object(a["X"])(()=>[me]),_:1}),Object(a["l"])(d,null,{default:Object(a["X"])(()=>[pe]),_:1}),Object(a["l"])(d,null,{default:Object(a["X"])(()=>[Oe]),_:1})]),_:1})]),Object(a["i"])("div",null,[(Object(a["C"])(!0),Object(a["h"])(a["a"],null,Object(a["K"])(c.goodsList,e=>(Object(a["C"])(),Object(a["f"])(b,{key:e.id,"img-url":e.img,title:e.name,price:String(e.tradePrice),vipPrice:String(e.price),shopDesc:"百年老店",delivery:"全校包邮",shopName:"工大哈东北总店"},{prolist:Object(a["X"])(()=>[Object(a["i"])("div",je,[Object(a["i"])("span",he,"批发"+Object(a["P"])(String(10*e.tradePrice/e.price).slice(0,3))+"折",1)])]),footer:Object(a["X"])(()=>[Object(a["l"])(u,{type:"primary",onClick:t=>{l.addCart(e.id,e.name)}},{default:Object(a["X"])(()=>[ge]),_:2},1032,["onClick"])]),_:2},1032,["img-url","title","price","vipPrice"]))),128)),Object(a["l"])(m,{distance:200,right:10,bottom:100})])])}let ye="";const ve=async function(e){if(C)return{flag:!0,data:[{id:0,name:"汽水",price:1.25,tradePrice:1,img:"https://v3.cn.vuejs.org/logo.png"},{id:1,name:"辣条",price:1,tradePrice:.5,img:"https://v3.cn.vuejs.org/logo.png"},{id:2,name:"面包",price:3.5,tradePrice:2.5,img:"https://v3.cn.vuejs.org/logo.png"},{id:3,name:"脆皮火烧",price:6,tradePrice:4.8,img:"https://v3.cn.vuejs.org/logo.png"},{id:4,name:"蛋堡",price:4.5,tradePrice:4,img:"https://v3.cn.vuejs.org/logo.png"},{id:5,name:"脆皮火烧",price:6,tradePrice:4.8,img:"https://v3.cn.vuejs.org/logo.png"},{id:6,name:"蛋堡",price:4.5,tradePrice:4,img:"https://v3.cn.vuejs.org/logo.png"}]};let t="https://"+k+ye+"/retail/goods";return await V(t,"search",{name:e})},we=async function(e,t,o,a){if(C)return{flag:!0,data:null};let r="https://"+k+ye+"/retail/order";return await V(r,"addItemToCart",{goodItems:{goodsId:e,num:t,discountRate:1},orderId:a})};let _e="";const Ie=async function(e){if(C)return{flag:!0,data:{id:23,goods:[{id:1,goodsId:0,goodsName:"汽水",num:16,discountRate:1},{id:2,goodsId:3,goodsName:"包子",num:4,discountRate:1}],createDate:"20220106",imDate:"20220108",price:645,customerId:123456,profit:60}};let t="https://"+k+_e+"/retail/order";return await V(t,"getMyCart",{id:e})},Ce=async function(e,t,o,a){if(C)return{flag:!0,data:null};let r="https://"+k+_e+"/retail/order";return await V(r,"changeItemNum",{goodItems:{goodsId:e,num:t,discountRate:1},orderId:a})},ke=async function(e){if(C)return{flag:!0,data:null};let t="https://"+k+_e+"/retail/order";return await V(t,"confirmCart",{id:e})};var Ve={data(){return{searchValue:"",goodsList:[]}},methods:{async onSearch(){let e=await ve(this.searchValue);!0===e["flag"]?this.goodsList=e["data"]:w["c"].error("未查询到任何商品")},async addCart(e,t){let o=await we(e,1,t,localStorage.getItem("cart_id"));!0===o["flag"]?w["c"].success("添加购物车成功",{duration:400}):w["c"].error("添加失败 "+o["data"])}},async mounted(){let e=await ve("");!0===e["flag"]?this.goodsList=e["data"]:w["c"].error("未查询到任何商品");let t=await Ie(Number(localStorage.getItem("id")));!0===t["flag"]?(console.log("获取用户购物车",t),localStorage.setItem("cart_id",t["data"]["id"])):w["c"].error("获取购物车失败")},watch:{searchValue(e,t){""===e.trim()&&this.onSearch()}}};o("1ca0");const Pe=l()(Ve,[["render",fe]]);var Ne=Pe;const Se={id:"note"},Me=Object(a["k"])(" 《软件过程与工具》新品即将上市，活动期间0元预约可参与抽奖，赢《人月神话》等好礼，更多产品信息请持续关注！ "),Le={class:"search_prolist_attr"},Ue={class:"word"},Xe=Object(a["k"])("删除商品"),xe={class:"ops_row"},De=Object(a["i"])("h3",null,"数量",-1),Re=Object(a["i"])("h3",null,"单价",-1),Ae=Object(a["i"])("h3",null,"总价",-1),Be={key:0,style:{"margin-top":"120px"}},Te={class:"ops_buttom_row"},ze=Object(a["i"])("h3",null,"总计",-1),Fe={id:"total_price"},Ke=Object(a["i"])("div",{style:{flex:"3"}},null,-1),Je={id:"submit_order"},$e=Object(a["k"])("结算"),Ee=Object(a["i"])("div",{style:{flex:"1"}},null,-1);function Ge(e,t,o,r,c,l){const i=Object(a["M"])("nut-noticebar"),n=Object(a["M"])("nut-button"),d=Object(a["M"])("nut-card"),s=Object(a["M"])("nut-inputnumber"),u=Object(a["M"])("nut-price"),b=Object(a["M"])("nut-empty"),m=Object(a["M"])("nut-backtop");return Object(a["C"])(),Object(a["h"])("div",null,[Object(a["i"])("div",Se,[Object(a["l"])(i,{closeMode:!0},{default:Object(a["X"])(()=>[Me]),_:1})]),(Object(a["C"])(!0),Object(a["h"])(a["a"],null,Object(a["K"])(c.goodsList,(e,t)=>(Object(a["C"])(),Object(a["h"])("div",{key:e.id},[Object(a["k"])(Object(a["P"])(e)+" ",1),Object(a["l"])(d,{"img-url":e.img,title:e.goodsName,price:String(e.tradePrice),vipPrice:String(e.price),shopDesc:"百年老店",delivery:"全校包邮",shopName:"工大哈东北总店"},{prolist:Object(a["X"])(()=>[Object(a["i"])("div",Le,[Object(a["i"])("span",Ue,"批发"+Object(a["P"])(String(10*e.tradePrice/e.price).slice(0,3))+"折",1)])]),footer:Object(a["X"])(()=>[Object(a["l"])(n,{type:"danger",onClick:t=>{l.onDeleteItemFromCart(e.goodsId,e.goodsName)}},{default:Object(a["X"])(()=>[Xe]),_:2},1032,["onClick"])]),_:2},1032,["img-url","title","price","vipPrice"]),Object(a["i"])("div",xe,[De,Object(a["l"])(s,{modelValue:e.num,"onUpdate:modelValue":t=>e.num=t,"button-size":"30","input-width":"50",onAdd:o=>{l.onChangeItemNum(e.id,e.num+1,e.goodsName,t)},onReduce:o=>{l.onChangeItemNum(e.id,e.num-1,e.goodsName,t)},onBlur:o=>{l.onChangeItemNum(e.id,e.num,e.goodsName,t)}},null,8,["modelValue","onUpdate:modelValue","onAdd","onReduce","onBlur"]),Re,Object(a["l"])(u,{price:c.UserMethod?e.tradePrice:e.price,size:"normal","need-symbol":!0,thousands:!0},null,8,["price"]),Ae,Object(a["l"])(u,{price:e.num*(c.UserMethod?e.tradePrice:e.price),size:"normal","need-symbol":!0,thousands:!0},null,8,["price"])])]))),128)),0===c.goodsList.length?(Object(a["C"])(),Object(a["h"])("div",Be,[Object(a["l"])(b,{image:"empty",description:"还没有商品，快去逛逛商城吧！"})])):Object(a["g"])("",!0),Object(a["l"])(m,{distance:200,right:10,bottom:100}),Object(a["i"])("div",Te,[ze,Object(a["i"])("div",Fe,[Object(a["l"])(u,{price:c.totalPrice,size:"normal","need-symbol":!0,thousands:!0},null,8,["price"])]),Ke,Object(a["i"])("div",Je,[Object(a["l"])(n,{type:"primary",onClick:l.onSubmitCart},{default:Object(a["X"])(()=>[$e]),_:1},8,["onClick"])]),Ee])])}var He={data(){return{goodsList:[{img:"",goodsName:"",tradePrice:1,price:1,goodsId:1,id:0,num:1}],goodsInfoList:[],UserMethod:!0,totalPrice:0}},watch:{},methods:{async addCart(e){let t=await we(Number(localStorage.getItem("user_id")),e);!0===t["flag"]?w["c"].success("添加购物车成功",{duration:400}):w["c"].error("添加失败 "+t["data"])},async onChangeItemNum(e,t,o,a){let r=await Ce(e,t,o,Number(localStorage.getItem("cart_id")));!0===r["flag"]?this.goodsList[a].num=t:(w["c"].error("购买数量修改失败"),this.getAllAboutCart()),this.countTotalPrice()},countTotalPrice(){let e=0;for(let t=0;t<this.goodsList.length;t++){let o=this.goodsList[t];e+=o.num*(this.UserMethod?o.tradePrice:o.price)}this.totalPrice=e},async getAllAboutCart(){let e=await Ie(Number(localStorage.getItem("id")));!0===e["flag"]?this.goodsList=e["data"]["goods"]:w["c"].error("获取购物车失败，请稍后再试");let t=await ve("");if(!0===t["flag"]){this.goodsInfoList=t["data"];for(let e=0;e<this.goodsList.length;e++){let t=this.goodsList[e],o=this.goodsInfoList.filter((function(e){return e.id===t.goodsId}))[0];this.goodsList[e]["price"]=o.price,this.goodsList[e]["tradePrice"]=o.tradePrice,console.log(o),this.goodsList[e]["goodsName"]=o.name}}else w["c"].error("获取商品信息失败...");this.UserMethod=JSON.parse(localStorage.getItem("method")),this.countTotalPrice()},async onDeleteItemFromCart(e,t){let o=await Ce(e,0,t,Number(localStorage.getItem("cart_id")));!0===o["flag"]?this.goodsList=this.goodsList.filter((function(t){return t.goodsId!==e})):(w["c"].error("删除修改失败"),this.getAllAboutCart()),this.countTotalPrice()},async onSubmitCart(){let e=await ke(Number(localStorage.getItem("cart_id")));!0===e["flag"]?w["c"].success("订单创建成功"):w["c"].error("订单创建失败"),this.getAllAboutCart(),this.countTotalPrice()}},async mounted(){await this.getAllAboutCart(),console.log("接受完毕"),console.log(this.goodsList)}};o("e3eb");const qe=l()(He,[["render",Ge]]);var Qe=qe;const We=Object(a["i"])("div",{style:{height:"10px"}},null,-1),Ye={class:"search_prolist_attr"},Ze={class:"word"},et={class:"ops_row"},tt=Object(a["i"])("div",{style:{flex:"4"}},null,-1),ot=Object(a["i"])("h4",null,"总价",-1),at=Object(a["k"])(),rt=Object(a["i"])("div",{style:{height:"8px"}},null,-1),ct=Object(a["k"])("支付订单"),lt=Object(a["i"])("div",{style:{height:"10px"}},null,-1),it={class:"search_prolist_attr"},nt={class:"word"},dt={class:"ops_row"},st=Object(a["i"])("div",{style:{flex:"4"}},null,-1),ut=Object(a["i"])("h4",null,"总价",-1),bt=Object(a["k"])(),mt=Object(a["i"])("div",{style:{height:"8px"}},null,-1),pt=Object(a["k"])("申请退款"),Ot=Object(a["i"])("div",{style:{height:"10px"}},null,-1),jt={class:"search_prolist_attr"},ht={class:"word"},gt={class:"ops_row"},ft=Object(a["i"])("div",{style:{flex:"4"}},null,-1),yt=Object(a["i"])("h4",null,"总价",-1),vt=Object(a["k"])(),wt=Object(a["i"])("div",{style:{height:"8px"}},null,-1),_t=Object(a["k"])("联系客服");function It(e,t,o,r,c,l){const i=Object(a["M"])("nut-input"),n=Object(a["M"])("nut-card"),d=Object(a["M"])("nut-price"),s=Object(a["M"])("nut-button"),u=Object(a["M"])("nut-tabpane"),b=Object(a["M"])("nut-tabs"),m=Object(a["M"])("nut-backtop");return Object(a["C"])(),Object(a["h"])("div",null,[Object(a["l"])(b,{modelValue:c.tabIndex,"onUpdate:modelValue":t[0]||(t[0]=e=>c.tabIndex=e)},{default:Object(a["X"])(()=>[Object(a["l"])(u,{title:"未支付"},{default:Object(a["X"])(()=>[(Object(a["C"])(!0),Object(a["h"])(a["a"],null,Object(a["K"])(c.orderUnPayedList,e=>(Object(a["C"])(),Object(a["h"])("div",{class:"orderItem",key:e.id},[Object(a["l"])(i,{modelValue:e.id,"onUpdate:modelValue":t=>e.id=t,readonly:Boolean(!0),label:"订单ID"},null,8,["modelValue","onUpdate:modelValue","readonly"]),We,(Object(a["C"])(!0),Object(a["h"])(a["a"],null,Object(a["K"])(e.goods,e=>(Object(a["C"])(),Object(a["h"])("div",{key:e.id},[Object(a["l"])(n,{"img-url":e.img,title:e.goodsName,price:String(e.tradePrice),vipPrice:String(e.price),shopDesc:"百年老店",delivery:"全校包邮",shopName:"工大哈东北总店"},{prolist:Object(a["X"])(()=>[Object(a["i"])("div",Ye,[Object(a["i"])("span",Ze,"批发"+Object(a["P"])(String(10*e.tradePrice/e.price).slice(0,3))+"折",1)])]),_:2},1032,["img-url","title","price","vipPrice"]),Object(a["i"])("div",et,[Object(a["i"])("h4",null,"数量 "+Object(a["P"])(e.num),1),tt,ot,at,Object(a["l"])(d,{price:e.num*(c.method?e.price:e.tradePrice),size:"normal","need-symbol":!0,thousands:!0},null,8,["price"])])]))),128)),Object(a["l"])(i,{modelValue:e.checkDate,"onUpdate:modelValue":t=>e.checkDate=t,readonly:Boolean(!0),label:"生成时间"},null,8,["modelValue","onUpdate:modelValue","readonly"]),Object(a["l"])(i,{modelValue:e.price,"onUpdate:modelValue":t=>e.price=t,readonly:Boolean(!0),label:"总金额"},null,8,["modelValue","onUpdate:modelValue","readonly"]),rt,Object(a["l"])(s,{type:"primary",class:"btn_center",onClick:t=>l.onPay(e.id)},{default:Object(a["X"])(()=>[ct]),_:2},1032,["onClick"])]))),128))]),_:1}),Object(a["l"])(u,{title:"已支付"},{default:Object(a["X"])(()=>[(Object(a["C"])(!0),Object(a["h"])(a["a"],null,Object(a["K"])(c.orderPayedList,e=>(Object(a["C"])(),Object(a["h"])("div",{class:"orderItem",key:e.id},[Object(a["l"])(i,{modelValue:e.id,"onUpdate:modelValue":t=>e.id=t,readonly:Boolean(!0),label:"订单ID"},null,8,["modelValue","onUpdate:modelValue","readonly"]),lt,(Object(a["C"])(!0),Object(a["h"])(a["a"],null,Object(a["K"])(e.goods,e=>(Object(a["C"])(),Object(a["h"])("div",{key:e.id},[Object(a["l"])(n,{"img-url":e.img,title:e.goodsName,price:String(e.tradePrice),vipPrice:String(e.price),shopDesc:"百年老店",delivery:"全校包邮",shopName:"工大哈东北总店"},{prolist:Object(a["X"])(()=>[Object(a["i"])("div",it,[Object(a["i"])("span",nt,"批发"+Object(a["P"])(String(10*e.tradePrice/e.price).slice(0,3))+"折",1)])]),_:2},1032,["img-url","title","price","vipPrice"]),Object(a["i"])("div",dt,[Object(a["i"])("h4",null,"数量 "+Object(a["P"])(e.num),1),st,ut,bt,Object(a["l"])(d,{price:e.num*(c.method?e.price:e.tradePrice),size:"normal","need-symbol":!0,thousands:!0},null,8,["price"])])]))),128)),Object(a["l"])(i,{modelValue:e.checkDate,"onUpdate:modelValue":t=>e.checkDate=t,readonly:Boolean(!0),label:"生成时间"},null,8,["modelValue","onUpdate:modelValue","readonly"]),Object(a["l"])(i,{modelValue:e.price,"onUpdate:modelValue":t=>e.price=t,readonly:Boolean(!0),label:"总金额"},null,8,["modelValue","onUpdate:modelValue","readonly"]),mt,Object(a["l"])(s,{type:"primary",class:"btn_center",onClick:l.onRefund},{default:Object(a["X"])(()=>[pt]),_:1},8,["onClick"])]))),128))]),_:1}),Object(a["l"])(u,{title:"已退款"},{default:Object(a["X"])(()=>[(Object(a["C"])(!0),Object(a["h"])(a["a"],null,Object(a["K"])(c.orderRefundList,e=>(Object(a["C"])(),Object(a["h"])("div",{class:"orderItem",key:e.id},[Object(a["l"])(i,{modelValue:e.id,"onUpdate:modelValue":t=>e.id=t,readonly:Boolean(!0),label:"订单ID"},null,8,["modelValue","onUpdate:modelValue","readonly"]),Ot,(Object(a["C"])(!0),Object(a["h"])(a["a"],null,Object(a["K"])(e.goods,e=>(Object(a["C"])(),Object(a["h"])("div",{key:e.id},[Object(a["l"])(n,{"img-url":e.img,title:e.goodsName,price:String(e.tradePrice),vipPrice:String(e.price),shopDesc:"百年老店",delivery:"全校包邮",shopName:"工大哈东北总店"},{prolist:Object(a["X"])(()=>[Object(a["i"])("div",jt,[Object(a["i"])("span",ht,"批发"+Object(a["P"])(String(10*e.tradePrice/e.price).slice(0,3))+"折",1)])]),_:2},1032,["img-url","title","price","vipPrice"]),Object(a["i"])("div",gt,[Object(a["i"])("h4",null,"数量 "+Object(a["P"])(e.num),1),ft,yt,vt,Object(a["l"])(d,{price:e.num*(c.method?e.price:e.tradePrice),size:"normal","need-symbol":!0,thousands:!0},null,8,["price"])])]))),128)),Object(a["l"])(i,{modelValue:e.checkDate,"onUpdate:modelValue":t=>e.checkDate=t,readonly:Boolean(!0),label:"生成时间"},null,8,["modelValue","onUpdate:modelValue","readonly"]),Object(a["l"])(i,{modelValue:e.price,"onUpdate:modelValue":t=>e.price=t,readonly:Boolean(!0),label:"总金额"},null,8,["modelValue","onUpdate:modelValue","readonly"]),wt,Object(a["l"])(s,{type:"primary",class:"btn_center",onClick:l.onContact},{default:Object(a["X"])(()=>[_t]),_:1},8,["onClick"])]))),128))]),_:1})]),_:1},8,["modelValue"]),Object(a["l"])(m,{distance:200,right:10,bottom:100})])}let Ct="";const kt=async function(e){if(C)return{flag:!0,data:[{id:0,checkDate:"20220107",pay:!1,refund:!1,goods:[{id:10,goodsId:2,goodsName:"汽水",num:10,discountRate:1},{id:11,goodsId:4,goodsName:"汽水",num:12,discountRate:1}],price:220,customerId:0,profit:200},{id:1,checkDate:"20220107",pay:!0,refund:!1,goods:[{id:10,goodsId:3,goodsName:"汽水",num:10,discountRate:1},{id:11,goodsId:4,goodsName:"汽水",num:12,discountRate:1}],price:220,customerId:0,profit:200},{id:2,checkDate:"20220107",pay:!0,refund:!0,goods:[{id:10,goodsId:3,goodsName:"汽水",num:10,discountRate:1},{id:11,goodsId:4,goodsName:"汽水",num:12,discountRate:1}],price:220,customerId:0,profit:200},{id:0,checkDate:"20220107",pay:!1,refund:!1,goods:[{id:10,goodsId:2,goodsName:"汽水",num:10,discountRate:1},{id:11,goodsId:4,goodsName:"汽水",num:12,discountRate:1}],price:220,customerId:0,profit:200},{id:1,checkDate:"20220107",pay:!0,refund:!1,goods:[{id:10,goodsId:3,goodsName:"汽水",num:10,discountRate:1},{id:11,goodsId:4,goodsName:"汽水",num:12,discountRate:1}],price:220,customerId:0,profit:200},{id:2,checkDate:"20220107",pay:!0,refund:!0,goods:[{id:10,goodsId:3,goodsName:"汽水",num:10,discountRate:1},{id:11,goodsId:4,goodsName:"汽水",num:12,discountRate:1}],price:220,customerId:0,profit:200}]};let t="https://"+k+Ct+"/retail/draftOrder";return await V(t,"getById",{customerId:e})},Vt=async function(e){if(C)return{flag:!0,data:{}};let t="https://"+k+Ct+"/retail/draftOrder";return await V(t,"pay",{id:e,userID:0})};var Pt={data(){return{orderAllList:[],orderPayedList:[],orderUnPayedList:[],orderRefundList:[],goodsList:[],goodsInfoList:[],method:!1,tabIndex:0,columns:[{title:"订单ID",key:"id"},{title:"下单时间",key:"checkDate"},{title:"总金额",key:"price"}]}},methods:{async getAllAboutOrders(){let e=await ve(""),t=await kt(Number(localStorage.getItem("id")));if(!0===t["flag"]&&!0===e["flag"]){this.goodsInfoList=e["data"];let o=t["data"],a=[],r=[],c=[];for(let e=0;e<o.length;e++){let t=o[e];for(let a=0;a<t.goods.length;a++){let r=t.goods[a],c=this.goodsInfoList.filter((function(e){return e.id===r.goodsId}))[0];o[e].goods[a]["price"]=c.price,o[e].goods[a]["tradePrice"]=c.tradePrice}!1===t.pay?r.push(t):!1===t.refund?a.push(t):c.push(t)}this.orderAllList=o,this.orderUnPayedList=r,this.orderPayedList=a,this.orderRefundList=c}else w["c"].error("获取订单信息失败 "+res["data"])},async addCart(e){let t=await we(localStorage.getItem("user_id"),e);!0===t["flag"]?w["c"].success("添加购物车成功",{duration:400}):w["c"].error("添加失败 "+t["data"])},onRefund(){Object(w["a"])({title:"申请退款",content:"您的退款申请正在受理中，请耐心等待结果。"})},onContact(){Object(w["a"])({title:"联系客服",content:"客服平台开发中，联系电话：18834835451"})},async onPay(e){let t=await Vt(e);!0===t["flag"]?(w["c"].success("订单支付成功！"),this.getAllAboutOrders()):w["c"].error("订单支付失败！")}},async mounted(){await this.getAllAboutOrders(),this.method="false"===localStorage.getItem("method")}};o("92cb");const Nt=l()(Pt,[["render",It]]);var St=Nt;const Mt=["value"],Lt=["value"],Ut=["value"],Xt=["value"],xt={id:"logout"},Dt=Object(a["k"])("退出登录");function Rt(e,t,o,r,c,l){const i=Object(a["M"])("nut-avatar"),n=Object(a["M"])("nut-form-item"),d=Object(a["M"])("nut-form"),s=Object(a["M"])("nut-button");return Object(a["C"])(),Object(a["h"])("div",null,[Object(a["l"])(i,{id:"photo",size:"large",icon:"https://img12.360buyimg.com/imagetools/jfs/t1/143702/31/16654/116794/5fc6f541Edebf8a57/4138097748889987.png"}),Object(a["l"])(d,null,{default:Object(a["X"])(()=>[Object(a["l"])(n,{label:"顾客类型"},{default:Object(a["X"])(()=>[Object(a["i"])("input",{class:"nut-input-text",placeholder:"请输入姓名",type:"text",value:!0===c.user_data.method?"批发":"零售",disabled:"true"},null,8,Mt)]),_:1}),Object(a["l"])(n,{label:"姓名"},{default:Object(a["X"])(()=>[Object(a["i"])("input",{class:"nut-input-text",placeholder:"请输入姓名",type:"text",value:c.user_data.name,disabled:"true"},null,8,Lt)]),_:1}),Object(a["l"])(n,{label:"联系电话"},{default:Object(a["X"])(()=>[Object(a["i"])("input",{class:"nut-input-text",placeholder:"请输入联系电话",type:"text",value:c.user_data.phone,disabled:"true"},null,8,Ut)]),_:1}),Object(a["l"])(n,{label:"单位"},{default:Object(a["X"])(()=>[Object(a["i"])("input",{class:"nut-input-text",placeholder:"请输入单位",type:"text",value:c.user_data.company,disabled:"true"},null,8,Xt)]),_:1})]),_:1}),Object(a["i"])("div",xt,[Object(a["l"])(s,{type:"danger",onClick:l.logout},{default:Object(a["X"])(()=>[Dt]),_:1},8,["onClick"])])])}let At="";const Bt=async function(e){if(C)return{flag:!0,data:{id:123456,name:"阿飞",password:"123213",phone:"12312312312",company:"大工哈",method:0}};let t="https://"+k+At+"/retail/customer";return await V(t,"search",{name:e})};var Tt={data(){return{user_data:[]}},async mounted(){let e=await Bt(localStorage.getItem("name"));!0===e["flag"]?this.user_data=e["data"][0]:w["b"].error("获取用户信息失败")},methods:{logout(){localStorage.clear(),this.$router.push("/login")}}};o("26cc");const zt=l()(Tt,[["render",Rt]]);var Ft=zt;const Kt=[{path:"/",redirect:"/login"},{path:"/login",name:"Login",component:L},{path:"/register",name:"Register",component:G},{path:"/market",component:be,children:[{path:"/market",component:Ne},{path:"/cart",component:Qe},{path:"/order",component:St},{path:"/info",component:Ft}]}],Jt=Object(s["a"])({history:Object(s["b"])(),routes:Kt});var $t=Jt;o("d211");Object(a["e"])(d).use($t).use(w["d"]).mount("#app")},"6dc9":function(e,t,o){},"92cb":function(e,t,o){"use strict";o("c0cc")},a4af:function(e,t,o){"use strict";o("d945")},a937:function(e,t,o){},ae7e:function(e,t,o){"use strict";o("b053")},af49:function(e,t,o){"use strict";o("2aba")},b053:function(e,t,o){},c0cc:function(e,t,o){},cd16:function(e,t,o){},cf2a:function(e,t,o){"use strict";o("fab0")},d945:function(e,t,o){},e3eb:function(e,t,o){"use strict";o("a937")},e9cf:function(e,t,o){"use strict";o("1d52")},fab0:function(e,t,o){}});
//# sourceMappingURL=app.8ef886c8.js.map