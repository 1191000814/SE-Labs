(function(e){function t(t){for(var a,c,r=t[0],n=t[1],d=t[2],u=0,b=[];u<r.length;u++)c=r[u],Object.prototype.hasOwnProperty.call(l,c)&&l[c]&&b.push(l[c][0]),l[c]=0;for(a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);s&&s(t);while(b.length)b.shift()();return i.push.apply(i,d||[]),o()}function o(){for(var e,t=0;t<i.length;t++){for(var o=i[t],a=!0,r=1;r<o.length;r++){var n=o[r];0!==l[n]&&(a=!1)}a&&(i.splice(t--,1),e=c(c.s=o[0]))}return e}var a={},l={app:0},i=[];function c(t){if(a[t])return a[t].exports;var o=a[t]={i:t,l:!1,exports:{}};return e[t].call(o.exports,o,o.exports,c),o.l=!0,o.exports}c.m=e,c.c=a,c.d=function(e,t,o){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(c.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)c.d(o,a,function(t){return e[t]}.bind(null,a));return o},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="./";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],n=r.push.bind(r);r.push=t,r=r.slice();for(var d=0;d<r.length;d++)t(r[d]);var s=n;i.push([0,"chunk-vendors"]),o()})({0:function(e,t,o){e.exports=o("56d7")},"1d52":function(e,t,o){},"2e28":function(e,t,o){"use strict";o("cfc4")},"2ea7":function(e,t,o){},"56d7":function(e,t,o){"use strict";o.r(t);var a=o("7a23");function l(e,t){const o=Object(a["M"])("router-view");return Object(a["C"])(),Object(a["f"])(o)}o("cf2a");var i=o("6b0d"),c=o.n(i);const r={},n=c()(r,[["render",l]]);var d=n,s=o("6c02");const u=e=>(Object(a["F"])("data-v-c04239b6"),e=e(),Object(a["D"])(),e),b={id:"body"},m=u(()=>Object(a["i"])("h1",{id:"head"},"登录体验完整功能",-1)),p=u(()=>Object(a["i"])("p",{id:"subtitle"},"软件过程与工具大作业项目",-1)),O=u(()=>Object(a["i"])("div",{id:"space1"},null,-1)),j=u(()=>Object(a["i"])("div",{id:"space1"},null,-1)),g={id:"to_register"},h=Object(a["k"])(" 没有账号？点击"),f=Object(a["k"])("注册"),y={id:"login"},v=Object(a["k"])("登录");function w(e,t,o,l,i,c){const r=Object(a["M"])("nut-input"),n=Object(a["M"])("router-link"),d=Object(a["M"])("nut-button");return Object(a["C"])(),Object(a["h"])("div",b,[m,p,O,Object(a["l"])(r,{placeholder:"请输入用户名",modelValue:i.form.username,"onUpdate:modelValue":t[0]||(t[0]=e=>i.form.username=e),label:"用户名"},null,8,["modelValue"]),j,Object(a["l"])(r,{placeholder:"请输入密码",modelValue:i.form.password,"onUpdate:modelValue":t[1]||(t[1]=e=>i.form.password=e),type:"password",label:"密码"},null,8,["modelValue"]),Object(a["i"])("div",g,[h,Object(a["l"])(n,{to:"/register"},{default:Object(a["X"])(()=>[f]),_:1})]),Object(a["i"])("div",y,[Object(a["l"])(d,{size:"large",type:"primary",onClick:c.submit},{default:Object(a["X"])(()=>[v]),_:1},8,["onClick"])])])}var _=o("42b7"),I=o("9035"),k=o.n(I);const C=!1,V="192.168.1.108:8081",P=async function(e,t,o){let a;return await k()({method:"post",url:e,headers:{"Content-Type":"application/x-www-form-urlencoded"},data:"action="+t+"&data="+JSON.stringify(o)}).then((function(e){a=e["data"]})),a};let S="";const N=async function(e,t){if(C)return{flag:!0,data:{user_id:123456}};let o="http://"+V+S+"/retail/customer";return await P(o,"login",{name:e,password:t})};var M={name:"Login",data(){return{form:{username:"",password:""}}},methods:{async submit(){if(""===this.form.username.trim())return void _["b"].danger("请输入用户名",{duration:1e3});if(""===this.form.password.trim())return void _["b"].danger("请输入密码",{duration:1e3});let e=await N(this.form.username,this.form.password);!0===e["flag"]?(_["b"].success("登录成功"),localStorage.setItem("id",e["data"]["id"]),localStorage.setItem("name",e["data"]["name"]),localStorage.setItem("method",e["data"]["method"]),this.$router.push("/market")):_["b"].danger(e.data)}},async mounted(){null!==localStorage.getItem("id")?this.$router.push("/market"):this.$router.push("/login")}};o("757d");const L=c()(M,[["render",w],["__scopeId","data-v-c04239b6"]]);var U=L;const x=e=>(Object(a["F"])("data-v-c262f072"),e=e(),Object(a["D"])(),e),X={id:"body"},D=x(()=>Object(a["i"])("h1",{id:"head"},"用户注册",-1)),R=x(()=>Object(a["i"])("p",{id:"subtitle"},"软件过程与工具大作业项目",-1)),A={id:"to_login"},B=Object(a["k"])(" 已有账号？点击"),T=Object(a["k"])("登录"),z={id:"register"},$=Object(a["k"])("注册");function F(e,t,o,l,i,c){const r=Object(a["M"])("nut-input"),n=Object(a["M"])("nut-picker"),d=Object(a["M"])("router-link"),s=Object(a["M"])("nut-button");return Object(a["C"])(),Object(a["h"])("div",X,[D,R,Object(a["l"])(r,{class:"input_row",placeholder:"请输入用户名",modelValue:i.form.username,"onUpdate:modelValue":t[0]||(t[0]=e=>i.form.username=e),label:"用户名"},null,8,["modelValue"]),Object(a["l"])(r,{class:"input_row",placeholder:"请输入密码",modelValue:i.form.password,"onUpdate:modelValue":t[1]||(t[1]=e=>i.form.password=e),type:"password",label:"密码"},null,8,["modelValue"]),Object(a["l"])(r,{class:"input_row",placeholder:"请再次输入密码",modelValue:i.form.password2,"onUpdate:modelValue":t[2]||(t[2]=e=>i.form.password2=e),type:"password",label:"确认密码"},null,8,["modelValue"]),Object(a["l"])(r,{class:"input_row",placeholder:"请输入电话号码",modelValue:i.form.phone,"onUpdate:modelValue":t[3]||(t[3]=e=>i.form.phone=e),label:"电话号码"},null,8,["modelValue"]),Object(a["l"])(r,{class:"input_row",placeholder:"请输入所在单位",modelValue:i.form.company,"onUpdate:modelValue":t[4]||(t[4]=e=>i.form.company=e),label:"所在单位"},null,8,["modelValue"]),Object(a["l"])(r,{class:"input_row",placeholder:"选择客户类型",modelValue:i.form.method,"onUpdate:modelValue":t[5]||(t[5]=e=>i.form.method=e),onFocus:c.onChooseType,label:"客户类型"},null,8,["modelValue","onFocus"]),Object(a["l"])(n,{visible:i.showChoices,"onUpdate:visible":t[6]||(t[6]=e=>i.showChoices=e),"list-data":i.types,title:"客户类型选择",onConfirm:c.confirm,"default-value-index":1},null,8,["visible","list-data","onConfirm"]),Object(a["i"])("div",A,[B,Object(a["l"])(d,{to:"/login"},{default:Object(a["X"])(()=>[T]),_:1})]),Object(a["i"])("div",z,[Object(a["l"])(s,{size:"large",type:"primary",onClick:c.submit},{default:Object(a["X"])(()=>[$]),_:1},8,["onClick"])])])}let K="";const J=async function(e,t,o,a,l){if(C)return{flag:!0,data:{}};let i="http://"+V+K+"/retail/customer";return await P(i,"register",{name:e,password:t,phone:o,company:a,method:l})};var E={name:"Register",data(){return{form:{username:"",password:"",password2:"",phone:"",company:"",method:""},showChoices:!1,types:["零售","批发"]}},methods:{async submit(){if(""===this.form.username.trim())return void _["b"].danger("请输入用户名",{duration:1e3});if(""===this.form.password.trim())return void _["b"].danger("请输入密码",{duration:1e3});if(""===this.form.password.trim()||this.form.password.trim()!==this.form.password2.trim())return void _["b"].danger("两次密码输入不一致",{duration:1e3});let e="零售"!==this.form.method,t=await J(this.form.username,this.form.password,this.form.phone,this.form.company,e);!0===t["flag"]?(_["b"].success("注册成功"),this.$router.push("/login")):_["b"].danger(t["data"])},onChooseType(){this.showChoices=!0},confirm(e){this.form.method=e}},mounted(){}};o("8ae7");const G=c()(E,[["render",F],["__scopeId","data-v-c262f072"]]);var H=G;const q=e=>(Object(a["F"])("data-v-415d2f7c"),e=e(),Object(a["D"])(),e),Q=q(()=>Object(a["i"])("div",{id:"header_div"},null,-1)),W=q(()=>Object(a["i"])("div",{id:"footer_div"},null,-1));function Y(e,t,o,l,i,c){const r=Object(a["M"])("Header"),n=Object(a["M"])("Body"),d=Object(a["M"])("Footer");return Object(a["C"])(),Object(a["h"])(a["a"],null,[Object(a["l"])(r,{id:"header"}),Q,Object(a["l"])(n,{id:"body"}),Object(a["l"])(d,{id:"footer"}),W],64)}function Z(e,t,o,l,i,c){return Object(a["C"])(),Object(a["h"])("div",null,[Object(a["i"])("h2",null,Object(a["P"])(i.NavName),1)])}var ee={data(){return{NavNameList:{"/market":"商城","/cart":"购物车","/order":"订单","/info":"我的"},NavName:"商城"}},watch:{$route(e,t){this.NavName=this.NavNameList[e.path]}}};o("ae7e");const te=c()(ee,[["render",Z],["__scopeId","data-v-29805cd4"]]);var oe=te;function ae(e,t,o,l,i,c){const r=Object(a["M"])("router-view");return Object(a["C"])(),Object(a["f"])(r)}var le={};const ie=c()(le,[["render",ae]]);var ce=ie;function re(e,t,o,l,i,c){const r=Object(a["M"])("nut-tabbar-item"),n=Object(a["M"])("nut-tabbar");return Object(a["C"])(),Object(a["f"])(n,{buttom:!0,onTabSwitch:c.tabSwitch},{default:Object(a["X"])(()=>[Object(a["l"])(r,{"tab-title":"商城",icon:"home"}),Object(a["l"])(r,{"tab-title":"购物车",icon:"cart"}),Object(a["l"])(r,{"tab-title":"订单",icon:"category"}),Object(a["l"])(r,{"tab-title":"我的",icon:"my"})]),_:1},8,["onTabSwitch"])}var ne={data(){return{navRoutes:{0:"/market",1:"/cart",2:"/order",3:"/info"}}},methods:{tabSwitch(e,t){this.$router.push(this.navRoutes[t])}}};const de=c()(ne,[["render",re]]);var se=de,ue={components:{Header:oe,Body:ce,Footer:se}};o("e9cf");const be=c()(ue,[["render",Y],["__scopeId","data-v-415d2f7c"]]);var me=be;const pe=Object(a["i"])("img",{src:"http://img2.baidu.com/it/u=1189085500,4133594552&fm=253&fmt=auto&app=120&f=JPEG?w=200&h=200",alt:""},null,-1),Oe=Object(a["i"])("img",{src:"http://img1.baidu.com/it/u=961597277,2375562680&fm=253&fmt=auto&app=120&f=JPEG?w=200&h=200",alt:""},null,-1),je=Object(a["i"])("img",{src:"http://img1.baidu.com/it/u=2779013017,1184228350&fm=26&fmt=auto",alt:""},null,-1),ge={class:"search_prolist_attr"},he={class:"word"},fe=Object(a["k"])("加入购物车");function ye(e,t,o,l,i,c){const r=Object(a["M"])("nut-icon"),n=Object(a["M"])("nut-searchbar"),d=Object(a["M"])("nut-swiper-item"),s=Object(a["M"])("nut-swiper"),u=Object(a["M"])("nut-button"),b=Object(a["M"])("nut-card"),m=Object(a["M"])("nut-backtop");return Object(a["C"])(),Object(a["h"])("div",null,[Object(a["l"])(n,{modelValue:i.searchValue,"onUpdate:modelValue":t[0]||(t[0]=e=>i.searchValue=e),placeholder:"搜索商品",onSearch:c.onSearch},{leftin:Object(a["X"])(()=>[Object(a["l"])(r,{size:"14",name:"search2"})]),_:1},8,["modelValue","onSearch"]),Object(a["i"])("div",null,[Object(a["l"])(s,{"init-page":0,"pagination-visible":!0,"pagination-color":"#426543","auto-play":"3000",height:"200"},{default:Object(a["X"])(()=>[Object(a["l"])(d,null,{default:Object(a["X"])(()=>[pe]),_:1}),Object(a["l"])(d,null,{default:Object(a["X"])(()=>[Oe]),_:1}),Object(a["l"])(d,null,{default:Object(a["X"])(()=>[je]),_:1})]),_:1})]),Object(a["i"])("div",null,[(Object(a["C"])(!0),Object(a["h"])(a["a"],null,Object(a["K"])(i.goodsList,e=>(Object(a["C"])(),Object(a["f"])(b,{key:e.id,"img-url":e.img,title:e.name,price:String(e.tradePrice),vipPrice:String(e.price),shopDesc:"百年老店",delivery:"全校包邮",shopName:"工大哈东北总店"},{prolist:Object(a["X"])(()=>[Object(a["i"])("div",ge,[Object(a["i"])("span",he,"批发"+Object(a["P"])(String(10*e.tradePrice/e.price).slice(0,3))+"折",1)])]),footer:Object(a["X"])(()=>[Object(a["l"])(u,{type:"primary",onClick:t=>{c.addCart(e.id,e.name)}},{default:Object(a["X"])(()=>[fe]),_:2},1032,["onClick"])]),_:2},1032,["img-url","title","price","vipPrice"]))),128)),Object(a["l"])(m,{distance:200,right:10,bottom:100})])])}let ve="";const we=async function(e){if(C)return{flag:!0,data:[{id:0,name:"汽水",price:1.25,tradePrice:1,img:"http://v3.cn.vuejs.org/logo.png"},{id:1,name:"辣条",price:1,tradePrice:.5,img:"http://v3.cn.vuejs.org/logo.png"},{id:2,name:"面包",price:3.5,tradePrice:2.5,img:"http://v3.cn.vuejs.org/logo.png"},{id:3,name:"脆皮火烧",price:6,tradePrice:4.8,img:"http://v3.cn.vuejs.org/logo.png"},{id:4,name:"蛋堡",price:4.5,tradePrice:4,img:"http://v3.cn.vuejs.org/logo.png"},{id:5,name:"脆皮火烧",price:6,tradePrice:4.8,img:"http://v3.cn.vuejs.org/logo.png"},{id:6,name:"蛋堡",price:4.5,tradePrice:4,img:"http://v3.cn.vuejs.org/logo.png"}]};let t="http://"+V+ve+"/retail/goods";return await P(t,"search",{name:e})},_e=async function(e,t,o,a){if(C)return{flag:!0,data:null};let l="http://"+V+ve+"/retail/order";return await P(l,"changeItemNum",{goodItems:{goodsId:e,num:-1,discountRate:1},orderId:a})};let Ie="";const ke=async function(e){if(C)return{flag:!0,data:{id:23,goods:[{id:1,goodsId:0,goodsName:"汽水",num:16,discountRate:1},{id:2,goodsId:3,goodsName:"包子",num:4,discountRate:1}],createDate:"20220106",imDate:"20220108",price:645,customerId:123456,profit:60}};let t="http://"+V+Ie+"/retail/order";return await P(t,"getMyCart",{id:e})},Ce=async function(e,t,o,a){if(C)return{flag:!0,data:null};let l="http://"+V+Ie+"/retail/order";return await P(l,"changeItemNum",{goodItems:{goodsId:e,num:t,discountRate:1},orderId:a})},Ve=async function(e){if(C)return{flag:!0,data:null};let t="http://"+V+Ie+"/retail/order";return await P(t,"confirm",{id:e})};var Pe={data(){return{searchValue:"",goodsList:[]}},methods:{async onSearch(){let e=await we(this.searchValue);!0===e["flag"]?this.goodsList=e["data"]:_["c"].fail("未查询到任何商品")},async addCart(e,t){let o=await _e(e,1,t,localStorage.getItem("cart_id"));!0===o["flag"]?_["c"].success("添加购物车成功",{duration:400}):_["c"].fail("添加失败 "+o["data"])}},async mounted(){null===localStorage.getItem("id")&&this.$router.push("/login");let e=await we("");!0===e["flag"]?this.goodsList=e["data"]:_["c"].fail("未查询到任何商品");let t=await ke(Number(localStorage.getItem("id")));!0===t["flag"]?(console.log("获取用户购物车",t),localStorage.setItem("cart_id",t["data"]["id"])):_["c"].fail("获取购物车失败")},watch:{searchValue(e,t){""===e.trim()&&this.onSearch()}}};o("f667");const Se=c()(Pe,[["render",ye]]);var Ne=Se;const Me={id:"note"},Le=Object(a["k"])(" 《软件过程与工具》新品即将上市，活动期间0元预约可参与抽奖，赢《人月神话》等好礼，更多产品信息请持续关注！ "),Ue={class:"search_prolist_attr"},xe={class:"word"},Xe=Object(a["k"])("删除商品"),De={class:"ops_row"},Re=Object(a["i"])("h3",null,"数量",-1),Ae=Object(a["i"])("h3",null,"单价",-1),Be=Object(a["i"])("h3",null,"总价",-1),Te={key:0,style:{"margin-top":"120px"}},ze={class:"ops_buttom_row"},$e=Object(a["i"])("h3",null,"总计",-1),Fe={id:"total_price"},Ke=Object(a["i"])("div",{style:{flex:"3"}},null,-1),Je={id:"submit_order"},Ee=Object(a["k"])("结算"),Ge=Object(a["i"])("div",{style:{flex:"1"}},null,-1);function He(e,t,o,l,i,c){const r=Object(a["M"])("nut-noticebar"),n=Object(a["M"])("nut-button"),d=Object(a["M"])("nut-card"),s=Object(a["M"])("nut-inputnumber"),u=Object(a["M"])("nut-price"),b=Object(a["M"])("nut-empty"),m=Object(a["M"])("nut-backtop");return Object(a["C"])(),Object(a["h"])("div",null,[Object(a["i"])("div",Me,[Object(a["l"])(r,{closeMode:!0},{default:Object(a["X"])(()=>[Le]),_:1})]),(Object(a["C"])(!0),Object(a["h"])(a["a"],null,Object(a["K"])(i.goodsList,(e,t)=>(Object(a["C"])(),Object(a["h"])("div",{key:e.id},[Object(a["l"])(d,{"img-url":e.img,title:e.goodsName,price:String(e.tradePrice),vipPrice:String(e.price),shopDesc:"百年老店",delivery:"全校包邮",shopName:"工大哈东北总店"},{prolist:Object(a["X"])(()=>[Object(a["i"])("div",Ue,[Object(a["i"])("span",xe,"批发"+Object(a["P"])(String(10*e.tradePrice/e.price).slice(0,3))+"折",1)])]),footer:Object(a["X"])(()=>[Object(a["l"])(n,{type:"danger",onClick:t=>{c.onDeleteItemFromCart(e.goodsId,e.goodsName)}},{default:Object(a["X"])(()=>[Xe]),_:2},1032,["onClick"])]),_:2},1032,["img-url","title","price","vipPrice"]),Object(a["i"])("div",De,[Re,Object(a["l"])(s,{modelValue:e.num,"onUpdate:modelValue":t=>e.num=t,"button-size":"30","input-width":"50",onAdd:o=>{c.onChangeItemNum(e.goodsId,e.num+1,e.goodsName,t)},onReduce:o=>{c.onChangeItemNum(e.goodsId,e.num-1,e.goodsName,t)},readonly:""},null,8,["modelValue","onUpdate:modelValue","onAdd","onReduce"]),Ae,Object(a["l"])(u,{price:i.UserMethod?e.tradePrice:e.price,size:"normal","need-symbol":!0,thousands:!0},null,8,["price"]),Be,Object(a["l"])(u,{price:e.num*(i.UserMethod?e.tradePrice:e.price),size:"normal","need-symbol":!0,thousands:!0},null,8,["price"])])]))),128)),0===i.goodsList.length?(Object(a["C"])(),Object(a["h"])("div",Te,[Object(a["l"])(b,{image:"empty",description:"还没有商品，快去逛逛商城吧！"})])):Object(a["g"])("",!0),Object(a["l"])(m,{distance:200,right:10,bottom:100}),Object(a["i"])("div",ze,[$e,Object(a["i"])("div",Fe,[Object(a["l"])(u,{price:i.totalPrice,size:"normal","need-symbol":!0,thousands:!0},null,8,["price"])]),Ke,Object(a["i"])("div",Je,[Object(a["l"])(n,{type:"primary",onClick:c.onSubmitCart},{default:Object(a["X"])(()=>[Ee]),_:1},8,["onClick"])]),Ge])])}var qe={data(){return{goodsList:[],goodsInfoList:[],UserMethod:!0,totalPrice:0}},watch:{},methods:{async onChangeItemNum(e,t,o,a){let l=await Ce(e,t,o,Number(localStorage.getItem("cart_id")));!0===l["flag"]?this.goodsList[a].num=Number(t):(_["c"].fail("购买数量修改失败"),this.getAllAboutCart()),this.countTotalPrice()},countTotalPrice(){let e=0;for(let t=0;t<this.goodsList.length;t++){let o=this.goodsList[t];e+=o.num*(this.UserMethod?o.tradePrice:o.price)}this.totalPrice=e},async getAllAboutCart(){let e=await ke(Number(localStorage.getItem("id")));!0===e["flag"]?this.goodsList=e["data"]["goods"]:_["c"].fail("获取购物车失败，请稍后再试");let t=await we("");if(!0===t["flag"]){this.goodsInfoList=t["data"];for(let e=0;e<this.goodsList.length;e++){let t=this.goodsList[e],o=this.goodsInfoList.filter((function(e){return e.id===t.goodsId}))[0];this.goodsList[e]["price"]=o.price,this.goodsList[e]["tradePrice"]=o.tradePrice,console.log(o),this.goodsList[e]["goodsName"]=o.name,this.goodsList[e]["img"]=o.img}}else _["c"].fail("获取商品信息失败...");this.UserMethod=JSON.parse(localStorage.getItem("method")),this.countTotalPrice()},async onDeleteItemFromCart(e,t){let o=await Ce(e,0,t,Number(localStorage.getItem("cart_id")));!0===o["flag"]?this.goodsList=this.goodsList.filter((function(t){return t.goodsId!==e})):(_["c"].fail("删除修改失败"),this.getAllAboutCart()),this.countTotalPrice()},async onSubmitCart(){let e=await Ve(Number(localStorage.getItem("cart_id")));if(!0===e["flag"]){_["c"].success("订单创建成功");let e=await ke(Number(localStorage.getItem("id")));!0===e["flag"]?(console.log("获取用户购物车",e),localStorage.setItem("cart_id",e["data"]["id"])):_["c"].fail("获取购物车失败")}else _["c"].fail("订单创建失败");this.getAllAboutCart(),this.countTotalPrice()}},async mounted(){await this.getAllAboutCart(),null===localStorage.getItem("id")&&this.$router.push("/login")}};o("2e28");const Qe=c()(qe,[["render",He]]);var We=Qe;const Ye={key:0,style:{"margin-top":"120px"}},Ze=Object(a["i"])("div",{style:{height:"10px"}},null,-1),et={class:"search_prolist_attr"},tt={class:"word"},ot={class:"ops_row"},at=Object(a["i"])("div",{style:{flex:"4"}},null,-1),lt=Object(a["i"])("h4",null,"总价",-1),it=Object(a["k"])(),ct=Object(a["i"])("div",{style:{height:"8px"}},null,-1),rt=Object(a["k"])("支付订单"),nt={key:0,style:{"margin-top":"120px"}},dt=Object(a["i"])("div",{style:{height:"10px"}},null,-1),st={class:"search_prolist_attr"},ut={class:"word"},bt={class:"ops_row"},mt=Object(a["i"])("div",{style:{flex:"4"}},null,-1),pt=Object(a["i"])("h4",null,"总价",-1),Ot=Object(a["k"])(),jt=Object(a["i"])("div",{style:{height:"8px"}},null,-1),gt=Object(a["k"])("申请退款"),ht={key:0,style:{"margin-top":"120px"}},ft=Object(a["i"])("div",{style:{height:"10px"}},null,-1),yt={class:"search_prolist_attr"},vt={class:"word"},wt={class:"ops_row"},_t=Object(a["i"])("div",{style:{flex:"4"}},null,-1),It=Object(a["i"])("h4",null,"总价",-1),kt=Object(a["k"])(),Ct=Object(a["i"])("div",{style:{height:"8px"}},null,-1),Vt=Object(a["k"])("联系客服");function Pt(e,t,o,l,i,c){const r=Object(a["M"])("nut-empty"),n=Object(a["M"])("nut-input"),d=Object(a["M"])("nut-card"),s=Object(a["M"])("nut-price"),u=Object(a["M"])("nut-button"),b=Object(a["M"])("nut-tabpane"),m=Object(a["M"])("nut-tabs"),p=Object(a["M"])("nut-backtop");return Object(a["C"])(),Object(a["h"])("div",null,[Object(a["l"])(m,{modelValue:i.tabIndex,"onUpdate:modelValue":t[0]||(t[0]=e=>i.tabIndex=e)},{default:Object(a["X"])(()=>[Object(a["l"])(b,{title:"未支付"},{default:Object(a["X"])(()=>[0===i.orderUnPayedList.length?(Object(a["C"])(),Object(a["h"])("div",Ye,[Object(a["l"])(r,{image:"empty",description:"这里还没有订单哦！"})])):Object(a["g"])("",!0),(Object(a["C"])(!0),Object(a["h"])(a["a"],null,Object(a["K"])(i.orderUnPayedList,e=>(Object(a["C"])(),Object(a["h"])("div",{class:"orderItem",key:e.id},[Object(a["l"])(n,{modelValue:e.id,"onUpdate:modelValue":t=>e.id=t,readonly:Boolean(!0),label:"订单ID"},null,8,["modelValue","onUpdate:modelValue","readonly"]),Ze,(Object(a["C"])(!0),Object(a["h"])(a["a"],null,Object(a["K"])(e.goods,e=>(Object(a["C"])(),Object(a["h"])("div",{key:e.id},[Object(a["l"])(d,{"img-url":e.img,title:e.goodsName,price:String(e.tradePrice),vipPrice:String(e.price),shopDesc:"百年老店",delivery:"全校包邮",shopName:"工大哈东北总店"},{prolist:Object(a["X"])(()=>[Object(a["i"])("div",et,[Object(a["i"])("span",tt,"批发"+Object(a["P"])(String(10*e.tradePrice/e.price).slice(0,3))+"折",1)])]),_:2},1032,["img-url","title","price","vipPrice"]),Object(a["i"])("div",ot,[Object(a["i"])("h4",null,"数量 "+Object(a["P"])(e.num),1),at,lt,it,Object(a["l"])(s,{price:e.num*(i.method?e.price:e.tradePrice),size:"normal","need-symbol":!0,thousands:!0},null,8,["price"])])]))),128)),Object(a["l"])(n,{modelValue:e.checkDate,"onUpdate:modelValue":t=>e.checkDate=t,readonly:Boolean(!0),label:"生成时间"},null,8,["modelValue","onUpdate:modelValue","readonly"]),Object(a["l"])(n,{modelValue:e.price,"onUpdate:modelValue":t=>e.price=t,readonly:Boolean(!0),label:"总金额"},null,8,["modelValue","onUpdate:modelValue","readonly"]),ct,Object(a["l"])(u,{type:"primary",class:"btn_center",onClick:t=>c.onPay(e.id)},{default:Object(a["X"])(()=>[rt]),_:2},1032,["onClick"])]))),128))]),_:1}),Object(a["l"])(b,{title:"已支付"},{default:Object(a["X"])(()=>[0===i.orderPayedList.length?(Object(a["C"])(),Object(a["h"])("div",nt,[Object(a["l"])(r,{image:"empty",description:"这里还没有订单哦！"})])):Object(a["g"])("",!0),(Object(a["C"])(!0),Object(a["h"])(a["a"],null,Object(a["K"])(i.orderPayedList,e=>(Object(a["C"])(),Object(a["h"])("div",{class:"orderItem",key:e.id},[Object(a["l"])(n,{modelValue:e.id,"onUpdate:modelValue":t=>e.id=t,readonly:Boolean(!0),label:"订单ID"},null,8,["modelValue","onUpdate:modelValue","readonly"]),dt,(Object(a["C"])(!0),Object(a["h"])(a["a"],null,Object(a["K"])(e.goods,e=>(Object(a["C"])(),Object(a["h"])("div",{key:e.id},[Object(a["l"])(d,{"img-url":e.img,title:e.goodsName,price:String(e.tradePrice),vipPrice:String(e.price),shopDesc:"百年老店",delivery:"全校包邮",shopName:"工大哈东北总店"},{prolist:Object(a["X"])(()=>[Object(a["i"])("div",st,[Object(a["i"])("span",ut,"批发"+Object(a["P"])(String(10*e.tradePrice/e.price).slice(0,3))+"折",1)])]),_:2},1032,["img-url","title","price","vipPrice"]),Object(a["i"])("div",bt,[Object(a["i"])("h4",null,"数量 "+Object(a["P"])(e.num),1),mt,pt,Ot,Object(a["l"])(s,{price:e.num*(i.method?e.price:e.tradePrice),size:"normal","need-symbol":!0,thousands:!0},null,8,["price"])])]))),128)),Object(a["l"])(n,{modelValue:e.checkDate,"onUpdate:modelValue":t=>e.checkDate=t,readonly:Boolean(!0),label:"生成时间"},null,8,["modelValue","onUpdate:modelValue","readonly"]),Object(a["l"])(n,{modelValue:e.price,"onUpdate:modelValue":t=>e.price=t,readonly:Boolean(!0),label:"总金额"},null,8,["modelValue","onUpdate:modelValue","readonly"]),jt,Object(a["l"])(u,{type:"primary",class:"btn_center",onClick:c.onRefund},{default:Object(a["X"])(()=>[gt]),_:1},8,["onClick"])]))),128))]),_:1}),Object(a["l"])(b,{title:"已退款"},{default:Object(a["X"])(()=>[0===i.orderRefundList.length?(Object(a["C"])(),Object(a["h"])("div",ht,[Object(a["l"])(r,{image:"empty",description:"这里还没有订单哦！"})])):Object(a["g"])("",!0),(Object(a["C"])(!0),Object(a["h"])(a["a"],null,Object(a["K"])(i.orderRefundList,e=>(Object(a["C"])(),Object(a["h"])("div",{class:"orderItem",key:e.id},[Object(a["l"])(n,{modelValue:e.id,"onUpdate:modelValue":t=>e.id=t,readonly:Boolean(!0),label:"订单ID"},null,8,["modelValue","onUpdate:modelValue","readonly"]),ft,(Object(a["C"])(!0),Object(a["h"])(a["a"],null,Object(a["K"])(e.goods,e=>(Object(a["C"])(),Object(a["h"])("div",{key:e.id},[Object(a["l"])(d,{"img-url":e.img,title:e.goodsName,price:String(e.tradePrice),vipPrice:String(e.price),shopDesc:"百年老店",delivery:"全校包邮",shopName:"工大哈东北总店"},{prolist:Object(a["X"])(()=>[Object(a["i"])("div",yt,[Object(a["i"])("span",vt,"批发"+Object(a["P"])(String(10*e.tradePrice/e.price).slice(0,3))+"折",1)])]),_:2},1032,["img-url","title","price","vipPrice"]),Object(a["i"])("div",wt,[Object(a["i"])("h4",null,"数量 "+Object(a["P"])(e.num),1),_t,It,kt,Object(a["l"])(s,{price:e.num*(i.method?e.price:e.tradePrice),size:"normal","need-symbol":!0,thousands:!0},null,8,["price"])])]))),128)),Object(a["l"])(n,{modelValue:e.checkDate,"onUpdate:modelValue":t=>e.checkDate=t,readonly:Boolean(!0),label:"生成时间"},null,8,["modelValue","onUpdate:modelValue","readonly"]),Object(a["l"])(n,{modelValue:e.price,"onUpdate:modelValue":t=>e.price=t,readonly:Boolean(!0),label:"总金额"},null,8,["modelValue","onUpdate:modelValue","readonly"]),Ct,Object(a["l"])(u,{type:"primary",class:"btn_center",onClick:c.onContact},{default:Object(a["X"])(()=>[Vt]),_:1},8,["onClick"])]))),128))]),_:1})]),_:1},8,["modelValue"]),Object(a["l"])(p,{distance:200,right:10,bottom:100})])}let St="";const Nt=async function(e){if(C)return{flag:!0,data:[{id:0,checkDate:"20220107",pay:!1,refund:!1,goods:[{id:10,goodsId:2,goodsName:"汽水",num:10,discountRate:1},{id:11,goodsId:4,goodsName:"汽水",num:12,discountRate:1}],price:220,customerId:0,profit:200},{id:1,checkDate:"20220107",pay:!0,refund:!1,goods:[{id:10,goodsId:3,goodsName:"汽水",num:10,discountRate:1},{id:11,goodsId:4,goodsName:"汽水",num:12,discountRate:1}],price:220,customerId:0,profit:200},{id:2,checkDate:"20220107",pay:!0,refund:!0,goods:[{id:10,goodsId:3,goodsName:"汽水",num:10,discountRate:1},{id:11,goodsId:4,goodsName:"汽水",num:12,discountRate:1}],price:220,customerId:0,profit:200},{id:0,checkDate:"20220107",pay:!1,refund:!1,goods:[{id:10,goodsId:2,goodsName:"汽水",num:10,discountRate:1},{id:11,goodsId:4,goodsName:"汽水",num:12,discountRate:1}],price:220,customerId:0,profit:200},{id:1,checkDate:"20220107",pay:!0,refund:!1,goods:[{id:10,goodsId:3,goodsName:"汽水",num:10,discountRate:1},{id:11,goodsId:4,goodsName:"汽水",num:12,discountRate:1}],price:220,customerId:0,profit:200},{id:2,checkDate:"20220107",pay:!0,refund:!0,goods:[{id:10,goodsId:3,goodsName:"汽水",num:10,discountRate:1},{id:11,goodsId:4,goodsName:"汽水",num:12,discountRate:1}],price:220,customerId:0,profit:200}]};let t="http://"+V+St+"/retail/draftOrder";return console.log(e),await P(t,"getByCustomerId",{customerId:e})},Mt=async function(e){if(C)return{flag:!0,data:{}};let t="http://"+V+St+"/retail/draftOrder";return await P(t,"pay",{id:e,userID:0})};var Lt={data(){return{orderAllList:[],orderPayedList:[],orderUnPayedList:[],orderRefundList:[],goodsList:[],goodsInfoList:[],method:!1,tabIndex:0,columns:[{title:"订单ID",key:"id"},{title:"下单时间",key:"checkDate"},{title:"总金额",key:"price"}]}},methods:{async getAllAboutOrders(){let e=await we(""),t=await Nt(Number(localStorage.getItem("id")));if(!0===t["flag"]&&!0===e["flag"]){this.goodsInfoList=e["data"];let o=t["data"],a=[],l=[],i=[];for(let e=0;e<o.length;e++){let t=o[e];for(let a=0;a<t.goods.length;a++){let l=t.goods[a],i=this.goodsInfoList.filter((function(e){return e.id===l.goodsId}))[0];o[e].goods[a]["price"]=i.price,o[e].goods[a]["tradePrice"]=i.tradePrice,o[e].goods[a]["goodsName"]=i.name,o[e].goods[a]["img"]=i.img}console.log(t),0===t.pay?l.push(t):0===t.refund?a.push(t):i.push(t)}this.orderAllList=o,this.orderUnPayedList=l.reverse(),this.orderPayedList=a.reverse(),this.orderRefundList=i.reverse()}else _["c"].fail("获取订单信息失败 "+res["data"])},onRefund(){Object(_["a"])({title:"申请退款",content:"您的退款申请正在受理中，请耐心等待结果。"})},onContact(){Object(_["a"])({title:"联系客服",content:"客服平台开发中，联系电话：18834835451"})},async onPay(e){let t=await Mt(e);!0===t["flag"]?(_["c"].success("订单支付成功！"),this.getAllAboutOrders()):_["c"].fail("订单支付失败！")}},async mounted(){await this.getAllAboutOrders(),this.method="false"===localStorage.getItem("method"),null===localStorage.getItem("id")&&this.$router.push("/login")}};o("ab4d");const Ut=c()(Lt,[["render",Pt]]);var xt=Ut;const Xt=["value"],Dt=["value"],Rt=["value"],At=["value"],Bt={id:"logout"},Tt=Object(a["k"])("退出登录");function zt(e,t,o,l,i,c){const r=Object(a["M"])("nut-avatar"),n=Object(a["M"])("nut-form-item"),d=Object(a["M"])("nut-form"),s=Object(a["M"])("nut-button");return Object(a["C"])(),Object(a["h"])("div",null,[Object(a["l"])(r,{id:"photo",size:"large",icon:"http://img12.360buyimg.com/imagetools/jfs/t1/143702/31/16654/116794/5fc6f541Edebf8a57/4138097748889987.png"}),Object(a["l"])(d,null,{default:Object(a["X"])(()=>[Object(a["l"])(n,{label:"顾客类型"},{default:Object(a["X"])(()=>[Object(a["i"])("input",{class:"nut-input-text",placeholder:"请输入姓名",type:"text",value:!0===i.user_data.method?"批发":"零售",disabled:"true"},null,8,Xt)]),_:1}),Object(a["l"])(n,{label:"姓名"},{default:Object(a["X"])(()=>[Object(a["i"])("input",{class:"nut-input-text",placeholder:"请输入姓名",type:"text",value:i.user_data.name,disabled:"true"},null,8,Dt)]),_:1}),Object(a["l"])(n,{label:"联系电话"},{default:Object(a["X"])(()=>[Object(a["i"])("input",{class:"nut-input-text",placeholder:"请输入联系电话",type:"text",value:i.user_data.phone,disabled:"true"},null,8,Rt)]),_:1}),Object(a["l"])(n,{label:"单位"},{default:Object(a["X"])(()=>[Object(a["i"])("input",{class:"nut-input-text",placeholder:"请输入单位",type:"text",value:i.user_data.company,disabled:"true"},null,8,At)]),_:1})]),_:1}),Object(a["i"])("div",Bt,[Object(a["l"])(s,{type:"danger",onClick:c.logout},{default:Object(a["X"])(()=>[Tt]),_:1},8,["onClick"])])])}let $t="";const Ft=async function(e){if(C)return{flag:!0,data:{id:123456,name:"阿飞",password:"123213",phone:"12312312312",company:"大工哈",method:0}};let t="http://"+V+$t+"/retail/customer";return await P(t,"search",{name:e})};var Kt={data(){return{user_data:[]}},async mounted(){let e=await Ft(localStorage.getItem("name"));!0===e["flag"]?this.user_data=e["data"][0]:_["b"].error("获取用户信息失败"),null!==localStorage.getItem("id")&&this.$router.push("/login")},methods:{logout(){localStorage.clear(),this.$router.push("/login")}}};o("aa49");const Jt=c()(Kt,[["render",zt]]);var Et=Jt;const Gt=[{path:"/",redirect:"/login"},{path:"/login",name:"Login",component:U},{path:"/register",name:"Register",component:H},{path:"/market",component:me,children:[{path:"/market",component:Ne},{path:"/cart",component:We},{path:"/order",component:xt},{path:"/info",component:Et}]}],Ht=Object(s["a"])({history:Object(s["b"])(),routes:Gt});var qt=Ht;o("d211");Object(a["e"])(d).use(qt).use(_["d"]).mount("#app")},"757d":function(e,t,o){"use strict";o("9fd8")},"8ae7":function(e,t,o){"use strict";o("a91b")},"9fd8":function(e,t,o){},a91b:function(e,t,o){},aa49:function(e,t,o){"use strict";o("2ea7")},ab4d:function(e,t,o){"use strict";o("f661")},ae7e:function(e,t,o){"use strict";o("b053")},af4d:function(e,t,o){},b053:function(e,t,o){},cf2a:function(e,t,o){"use strict";o("fab0")},cfc4:function(e,t,o){},e9cf:function(e,t,o){"use strict";o("1d52")},f661:function(e,t,o){},f667:function(e,t,o){"use strict";o("af4d")},fab0:function(e,t,o){}});
//# sourceMappingURL=app.dc52a48a.js.map